# Python Causal Impact

[![Build Status](https://travis-ci.org/tcassou/causal_impact.svg?branch=master)](https://travis-ci.org/tcassou/causal_impact)

**Work In Progress**

Causal inference using Bayesian structural time-series models.
This package aims at defining a python equivalent of the [R CausalImpact package by Google](https://github.com/google/CausalImpact).

This python package implements an approach to estimating the causal effect of a designed intervention on a time series. For example, how many additional daily clicks were generated by an advertising campaign? Answering a question like this can be difficult when a randomized experiment is not available. The package aims to address this difficulty using a structural Bayesian time-series model to estimate how the response metric might have evolved after the intervention if the intervention had not occurred.

As with all approaches to causal inference on non-experimental data, valid conclusions require strong assumptions. The CausalImpact package, in particular, assumes that the outcome time series can be explained in terms of a set of control time series that were themselves not affected by the intervention. Furthermore, the relation between treated series and control series is assumed to be stable during the post-intervention period. Understanding and checking these assumptions for any given application is critical for obtaining valid conclusions.

## Setup

Preferably use a virtual environment:
```
git clone git@github.com:tcassou/causal_impact
cd causal_impact
virtualenv .venv
. .venv/bin/activate
pip install -r requirements.txt
```

## Example

Suppose we have a `DataFrame` `data` recording daily measures for three different markets `y`, `x1` and `x2`,  for `t = 0..365`).
The `y` time series in `data` is the one we will be modeling, while other columns (`x1` and `x2` here) will be used as a set of control time series.
```
>>> data
      y       x1      x2
  0   1735.01 1014.44 1005.87
  1   1709.54 1012.63 1008.18
  2   1772.95 1039.04 1024.21
...   ...     ...     ...
```
At `t = date_inter = 280`, a marketing campaing (the *intervention*) is run for market `y`. We want to understand the impact of that campaign on our measure.

```
from causal_impact import CausalImpact

ci = CausalImpact(data, date_inter)
ci.run()
ci.plot()
```

After fitting the model, and estimating what the `y` time series would have been without any intervention, this will typically produce the following plots:
![Impact Plot](https://github.com/tcassou/causal_impact/blob/master/examples/causal_impact.png)

## Further resources

* [Documentation and examples](http://google.github.io/CausalImpact/CausalImpact.html)
* [Brodersen et al., Annals of Applied Statistics (2015)](http://research.google.com/pubs/pub41854.html)
* Discussion forum: http://stats.stackexchange.com/

## Issues and improvements
As mentioned above, this package is still being developed. Feel free to contribute through githib by sending pull requests or reporting issues.
